<!DOCTYPE html><html><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>[Droonga]Droongaのインストーラーを直した | アペフチ</title><script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script><link href="../../components/elements.vulcanized.html" rel=import /><link rel=alternate type="application/atom+xml" title="アペフチ" href="../../recent-days.atom"/><link href="../../bower_components/sanitize-css/sanitize.css" rel=stylesheet /><link href="../../stylesheets/highlight-81ca03d6.css" rel=stylesheet /><script src="../../javascripts/all-d7c52391.js"></script><link href="../../favicon.ico" rel="shortcut icon" type="image/x-icon"/><link href="../../images/favicon-8d71db77.png" rel=icon type="image/png" size=60x60 /><link href="/apehuci/manifest.json" rel=manifest><meta name=theme-color content="#b71c1c"><meta name=og:title content="[Droonga]Droongaのインストーラーを直したDroongaのインストーラーを直した"><meta name=twitter:description content="Droongaは、しばらくマニュアル通りにインストールできない状態だったので、インストーラーを直してプルリクエストを送った。 https://github.com/droonga/droonga-engine/pull/39 https://github.com/droonga/droonga-http-server/pull/13 （マージしてもらった後に問..."><meta name=twitter:card content=summary><meta name=twitter:site content=@KitaitiMakoto><meta name=twitter:image content="https://kitaitimakoto.github.io/apehuci/images/icon-bbe8ac52.png"></head><body class="x2016 x2016_01 x2016_01_24"><blog-router base-regex="^/apehuci/"></blog-router><main><app-header-layout><app-header fixed shadow slot=header><app-toolbar><h2 class=site-title><a href="../../"> アペフチ <paper-ripple></paper-ripple></a></h2></app-toolbar></app-header><article><header><paper-card><h1>Droongaのインストーラーを直した</h1><time pubdate>2016-01-24</time><ul class=tags><li><a href="../../tags/droonga.html" rel=tag>Droonga</a></li></ul></paper-card></header><paper-card><p><a href="http://droonga.org/ja/">Droonga</a>は、しばらく<a href="http://droonga.org/ja/install/">マニュアル</a>通りにインストールできない状態だったので、インストーラーを直してプルリクエストを送った。</p><ul><li><a href="https://github.com/droonga/droonga-engine/pull/39">https://github.com/droonga/droonga-engine/pull/39</a></li><li><a href="https://github.com/droonga/droonga-http-server/pull/13">https://github.com/droonga/droonga-http-server/pull/13</a></li></ul><p>（マージしてもらった後に問題に気付いて追加でちょいちょいパッチを投げてもいる）</p><p>マージされたものの、今はまだ修正版がリリースはされていないので、それぞれこういう風に<code class=highlighter-rouge>VERSION</code>環境変数を指定してインストールする必要がある。</p><div class=highlighter-rouge><pre class=highlight><code># curl https://raw.githubusercontent.com/droonga/droonga-engine/master/install.sh | \
    VERSION=master bash
# curl https://raw.githubusercontent.com/droonga/droonga-http-server/master/install.sh | \
    VERSION=master bash
</code></pre></div><p>リリースされたら<code class=highlighter-rouge>VERSION=master</code>はなくてもインストールできるようになる。</p><p>また、マニュアルでは<code class=highlighter-rouge>service</code>コマンドでDroongaの二つのプロセスを管理しているけど、今回のパッチで<a href="http://freedesktop.org/wiki/Software/systemd/">systemd</a>を使うようになったので、今マニュアルを直しているところ。来週中にはパッチを送れるはず。</p><p>マニュアル通りに入れられないこと自体は認識していて、ワークアラウンド入りの<a href="http://itamae.kitchen/">Itamae</a>レシピを作って使っていた（<a href="../../2015/12/05.html">DroongaをインストールするItamaeレシピ</a>）。後ろめたさがあった。スキル的には自分で直せるはずなのにそうしていないのは愚か、問題報告すらしていなかった。今回修正して、受け入れてもらって、喉の小骨がようやく取り除けた気分だ。</p><p>恥ずかしながらシェルスクリプトに不慣れで、プルリクエストを送ったあとで、色々指摘してもらいながら直していた。ありがとうございました。</p><p>systemdのunitファイルにも不安があるので、こうしたほうがいいよというのがあったらぜひ教えてほしい。</p><ul><li><a href="https://github.com/droonga/droonga-engine/blob/master/install/droonga-engine.service">droonga-engine.service</a></li><li><a href="https://github.com/droonga/droonga-http-server/blob/master/install/droonga-http-server.service">droonga-http-server.service</a></li></ul></paper-card><footer><ul><li class=next><a href="25.html" rel=next><paper-button raised>『メタプログラミングRuby 第2版』@Sendagaya.rb #134</paper-button></a></li><li class=prev><a href="20.html" rel=prev><paper-button raised>渋谷.rb[:20160120]</paper-button></a></li></ul><paper-card><blog-search url="https://search.apehuci.kitaitimakoto.net/d" base=/apehuci/ table=Apehuci debounce-duration=300></blog-search></paper-card><paper-card> &copy; <a class=copy href="https://twitter.com/KitaitiMakoto">北市真</a></paper-card></footer></article></app-header-layout></main><script defer async src="//hypothes.is/embed.js"></script><script async="" src="//platform.twitter.com/widgets.js" charset=utf-8></script></body></html>